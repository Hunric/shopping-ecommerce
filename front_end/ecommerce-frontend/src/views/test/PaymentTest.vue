<template>
  <div class="payment-test">
    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <BackToHomeButton :fixed="true" position="top-right" size="small" />
    
    <h1>æ¨¡æ‹Ÿæ”¯ä»˜åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
      <h2>åŠŸèƒ½ç‰¹æ€§</h2>
      <ul class="feature-list">
        <li>âœ… æ”¯æŒæ”¯ä»˜å®æ¨¡æ‹Ÿæ”¯ä»˜ï¼ˆäºŒç»´ç æ‰«æï¼‰</li>
        <li>âœ… æ”¯æŒå¾®ä¿¡æ”¯ä»˜æ¨¡æ‹Ÿæ”¯ä»˜ï¼ˆäºŒç»´ç æ‰«æï¼‰</li>
        <li>âœ… æ”¯æŒé“¶è¡Œå¡æ”¯ä»˜ï¼ˆè¡¨å•å¡«å†™ï¼‰</li>
        <li>âœ… çœŸå®çš„æ”¯ä»˜æµç¨‹ä½“éªŒ</li>
        <li>âœ… æ”¯ä»˜çŠ¶æ€å®æ—¶åé¦ˆ</li>
        <li>âœ… æ”¯ä»˜æˆåŠŸ/å¤±è´¥å¤„ç†</li>
        <li>âœ… è®¢å•çŠ¶æ€è‡ªåŠ¨æ›´æ–°</li>
        <li>âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯</li>
      </ul>
    </div>
    
    <div class="test-section">
      <h2>æ”¯ä»˜æµç¨‹æµ‹è¯•</h2>
      <div class="flow-steps">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>åˆ›å»ºæµ‹è¯•è®¢å•</h4>
            <p>åœ¨è´­ç‰©è½¦ä¸­æ·»åŠ å•†å“ï¼Œè¿›å…¥ç»“ç®—é¡µé¢</p>
            <el-button @click="goToCart" type="primary">å‰å¾€è´­ç‰©è½¦</el-button>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>æäº¤è®¢å•</h4>
            <p>å¡«å†™æ”¶è´§åœ°å€ï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼Œæäº¤è®¢å•</p>
            <el-button @click="goToCheckout" type="primary">å‰å¾€ç»“ç®—é¡µé¢</el-button>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>è¿›å…¥æ”¯ä»˜é¡µé¢</h4>
            <p>è®¢å•æäº¤æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°æ”¯ä»˜é¡µé¢</p>
            <el-button @click="goToOrders" type="primary">æŸ¥çœ‹æˆ‘çš„è®¢å•</el-button>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-content">
            <h4>å®Œæˆæ”¯ä»˜</h4>
            <p>é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼Œå®Œæˆæ¨¡æ‹Ÿæ”¯ä»˜æµç¨‹</p>
            <el-button @click="testDirectPayment" type="success">ç›´æ¥æµ‹è¯•æ”¯ä»˜</el-button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="test-section">
      <h2>æ”¯ä»˜æ–¹å¼è¯¦æƒ…</h2>
      <div class="payment-methods">
        <div class="method-card alipay">
          <div class="method-icon">ğŸ’°</div>
          <h3>æ”¯ä»˜å®æ”¯ä»˜</h3>
          <ul>
            <li>æ˜¾ç¤ºæ¨¡æ‹ŸäºŒç»´ç </li>
            <li>æ‰«ç æ”¯ä»˜ä½“éªŒ</li>
            <li>æ”¯ä»˜çŠ¶æ€å®æ—¶æ›´æ–°</li>
            <li>90%æˆåŠŸç‡æ¨¡æ‹Ÿ</li>
          </ul>
        </div>
        
        <div class="method-card wechat">
          <div class="method-icon">ğŸ’š</div>
          <h3>å¾®ä¿¡æ”¯ä»˜</h3>
          <ul>
            <li>å¾®ä¿¡é£æ ¼äºŒç»´ç </li>
            <li>æ‰«ç æ”¯ä»˜ä½“éªŒ</li>
            <li>æ”¯ä»˜çŠ¶æ€å®æ—¶æ›´æ–°</li>
            <li>90%æˆåŠŸç‡æ¨¡æ‹Ÿ</li>
          </ul>
        </div>
        
        <div class="method-card bank">
          <div class="method-icon">ğŸ¦</div>
          <h3>é“¶è¡Œå¡æ”¯ä»˜</h3>
          <ul>
            <li>é“¶è¡Œå¡ä¿¡æ¯è¡¨å•</li>
            <li>å¡å·æ ¼å¼åŒ–è¾“å…¥</li>
            <li>è¡¨å•éªŒè¯</li>
            <li>95%æˆåŠŸç‡æ¨¡æ‹Ÿ</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="test-section">
      <h2>æŠ€æœ¯å®ç°</h2>
      <div class="tech-details">
        <div class="tech-item">
          <h4>å‰ç«¯æŠ€æœ¯</h4>
          <ul>
            <li>Vue 3 + TypeScript</li>
            <li>Element Plus UIç»„ä»¶</li>
            <li>å“åº”å¼è®¾è®¡</li>
            <li>åŠ¨ç”»æ•ˆæœ</li>
          </ul>
        </div>
        
        <div class="tech-item">
          <h4>æ”¯ä»˜æ¨¡æ‹Ÿ</h4>
          <ul>
            <li>äºŒç»´ç åŠ¨æ€ç”Ÿæˆ</li>
            <li>æ”¯ä»˜çŠ¶æ€æœº</li>
            <li>éšæœºæˆåŠŸç‡</li>
            <li>å»¶æ—¶æ¨¡æ‹Ÿ</li>
          </ul>
        </div>
        
        <div class="tech-item">
          <h4>ç”¨æˆ·ä½“éªŒ</h4>
          <ul>
            <li>åŠ è½½çŠ¶æ€æç¤º</li>
            <li>é”™è¯¯å¤„ç†</li>
            <li>æˆåŠŸåé¦ˆ</li>
            <li>æµç¨‹å¼•å¯¼</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="test-section">
      <h2>æµ‹è¯•è¯´æ˜</h2>
      <div class="test-notes">
        <div class="note-item warning">
          <h4>âš ï¸ æ³¨æ„äº‹é¡¹</h4>
          <ul>
            <li>è¿™æ˜¯æ¨¡æ‹Ÿæ”¯ä»˜åŠŸèƒ½ï¼Œä¸ä¼šäº§ç”ŸçœŸå®çš„èµ„é‡‘æµåŠ¨</li>
            <li>æ”¯ä»˜æˆåŠŸç‡ä¸ºæ¨¡æ‹Ÿè®¾ç½®ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦å¯¹æ¥çœŸå®æ”¯ä»˜æ¥å£</li>
            <li>äºŒç»´ç ä¸ºæ¼”ç¤ºç”¨é€”ï¼Œæ— æ³•çœŸå®æ‰«æ</li>
          </ul>
        </div>
        
        <div class="note-item info">
          <h4>ğŸ’¡ æµ‹è¯•å»ºè®®</h4>
          <ul>
            <li>æµ‹è¯•ä¸åŒæ”¯ä»˜æ–¹å¼çš„ç”¨æˆ·ä½“éªŒ</li>
            <li>æµ‹è¯•æ”¯ä»˜å¤±è´¥çš„å¤„ç†æµç¨‹</li>
            <li>æµ‹è¯•ç§»åŠ¨ç«¯çš„å“åº”å¼æ•ˆæœ</li>
            <li>æµ‹è¯•æ”¯ä»˜æˆåŠŸåçš„è®¢å•çŠ¶æ€æ›´æ–°</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="test-section">
      <h2>å¿«é€Ÿæµ‹è¯•</h2>
      <div class="quick-test">
        <p>å¦‚æœæ‚¨æœ‰å¾…æ”¯ä»˜çš„è®¢å•ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•æ”¯ä»˜åŠŸèƒ½ï¼š</p>
        <div class="test-input">
          <el-input 
            v-model="testOrderId" 
            placeholder="è¯·è¾“å…¥è®¢å•ID"
            style="width: 200px; margin-right: 10px;"
          />
          <el-button @click="goToPayment" type="primary" :disabled="!testOrderId">
            å‰å¾€æ”¯ä»˜é¡µé¢
          </el-button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage, ElButton, ElInput } from 'element-plus'
import BackToHomeButton from '@/components/common/BackToHomeButton.vue'

const router = useRouter()
const testOrderId = ref('')

const goToCart = () => {
  router.push('/cart')
}

const goToCheckout = () => {
  router.push('/checkout')
}

const goToOrders = () => {
  router.push('/user/orders')
}

const goToPayment = () => {
  if (!testOrderId.value) {
    ElMessage.warning('è¯·è¾“å…¥è®¢å•ID')
    return
  }
  router.push(`/payment/${testOrderId.value}`)
}

const testDirectPayment = () => {
  ElMessage.info('è¯·å…ˆåˆ›å»ºä¸€ä¸ªå¾…æ”¯ä»˜çš„è®¢å•ï¼Œç„¶åä½¿ç”¨è®¢å•IDè¿›è¡Œæµ‹è¯•')
}
</script>

<style scoped>
.payment-test {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: Arial, sans-serif;
}

h1 {
  color: #333;
  text-align: center;
  margin-bottom: 30px;
  font-size: 28px;
}

.test-section {
  background: white;
  border-radius: 12px;
  padding: 25px;
  margin-bottom: 25px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.test-section h2 {
  color: #409eff;
  margin-bottom: 20px;
  font-size: 20px;
  border-bottom: 2px solid #409eff;
  padding-bottom: 8px;
}

.feature-list {
  list-style: none;
  padding: 0;
}

.feature-list li {
  padding: 8px 0;
  font-size: 16px;
  color: #606266;
}

.flow-steps {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.step {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid #409eff;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #409eff;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 18px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
}

.step-content h4 {
  margin: 0 0 8px 0;
  color: #333;
  font-size: 18px;
}

.step-content p {
  margin: 0 0 15px 0;
  color: #666;
  line-height: 1.5;
}

.payment-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.method-card {
  padding: 25px;
  border-radius: 12px;
  text-align: center;
  color: white;
  position: relative;
  overflow: hidden;
}

.method-card.alipay {
  background: linear-gradient(135deg, #1677ff, #69c0ff);
}

.method-card.wechat {
  background: linear-gradient(135deg, #07c160, #52c41a);
}

.method-card.bank {
  background: linear-gradient(135deg, #722ed1, #b37feb);
}

.method-icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.method-card h3 {
  margin: 0 0 15px 0;
  font-size: 20px;
}

.method-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
  text-align: left;
}

.method-card li {
  padding: 5px 0;
  font-size: 14px;
  opacity: 0.9;
}

.tech-details {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.tech-item {
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid #67c23a;
}

.tech-item h4 {
  margin: 0 0 15px 0;
  color: #67c23a;
  font-size: 16px;
}

.tech-item ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.tech-item li {
  padding: 4px 0;
  color: #606266;
  font-size: 14px;
}

.test-notes {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 20px;
}

.note-item {
  padding: 20px;
  border-radius: 8px;
}

.note-item.warning {
  background: #fef0f0;
  border-left: 4px solid #f56c6c;
}

.note-item.info {
  background: #f0f9ff;
  border-left: 4px solid #409eff;
}

.note-item h4 {
  margin: 0 0 15px 0;
  font-size: 16px;
}

.note-item.warning h4 {
  color: #f56c6c;
}

.note-item.info h4 {
  color: #409eff;
}

.note-item ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.note-item li {
  padding: 4px 0;
  color: #606266;
  font-size: 14px;
}

.quick-test {
  text-align: center;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.quick-test p {
  margin: 0 0 20px 0;
  color: #666;
  font-size: 16px;
}

.test-input {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .payment-test {
    padding: 15px;
  }
  
  .flow-steps {
    gap: 15px;
  }
  
  .step {
    flex-direction: column;
    text-align: center;
  }
  
  .payment-methods {
    grid-template-columns: 1fr;
  }
  
  .tech-details {
    grid-template-columns: 1fr;
  }
  
  .test-notes {
    grid-template-columns: 1fr;
  }
  
  .test-input {
    flex-direction: column;
    align-items: stretch;
  }
}
</style> 